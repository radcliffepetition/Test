<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Take the Quiz</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700&display=swap" rel="stylesheet">

  <title>Homepage</title>
  <!-- Add Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-auth.js"></script>



<style>
body { background:#111; color:white; font-family:'Orbitron',sans-serif; }

nav .logo { font-weight:700; font-size:1.5rem; padding:10px; }

.quiz-container { max-width:700px; margin:140px auto; text-align:center; padding:20px; }

.start-btn, .answer-btn, .submit-written {
    display:block; width:100%; padding:18px; margin:12px 0;
    font-size:1.2rem; border-radius:14px;
    background:rgba(255,255,255,0.15);
    border:1px solid rgba(255,255,255,0.2);
    color:white; cursor:pointer; transition:0.3s ease;
    backdrop-filter:blur(6px);
}

.start-btn:hover, .answer-btn:hover, .submit-written:hover {
    background:rgba(255,255,255,0.3); transform:translateY(-3px);
}

input[type="text"] {
    width:100%; padding:12px; border-radius:10px;
    border:none; margin-top:15px; font-size:1.1rem;
}

/* Slide animations */
.slide-out-left { animation: outLeft .45s ease forwards; }
.slide-in-right { animation: inRight .45s ease forwards; }

@keyframes outLeft {
    0%{opacity:1; transform:translateX(0);}
    100%{opacity:0; transform:translateX(-80px);}
}

@keyframes inRight {
    0%{opacity:0; transform:translateX(80px);}
    100%{opacity:1; transform:translateX(0);}
}
</style>
</head>

<body>

<nav>
    <div class="left-group">
        <div class="logo">Camp Citizen</div>
    </div>
</nav>

<div class="quiz-container">

    <div id="start-screen">
        <h1>Take the Quiz?</h1>
    <button class="start-btn" onclick="showNotice()">START</button>
    </div>

  <div id="notice-screen" style="display:none;">
    <h1>Before You Start</h1>
    <p style="margin:20px 0; line-height:1.6;">
        Please note that this quiz has no right or wrong answers.<br>
        Just try your best and answer honestly.
    </p>
    <button class="start-btn" onclick="confirmStart()">OK</button>
</div>

    <div id="question-screen" style="display:none;">
        <h1 id="question-text"></h1>
        <div id="answers"></div>
    </div>

    <div id="end-screen" style="display:none;">
        <h1>Quiz Complete!</h1>
        <p>Your response has been sent for review.</p>
    </div>

</div>

<script type="module">

// ================= QUIZ QUESTIONS =================
const questions = [
    { text: "When did you join Star Citizen?", type: "multiple", answers: ["Before this group was created", "Before 2020", "In the past 2 years", "When it all began"] },
    { text: "How much do you know about Star Citizen?", type: "multiple", answers: ["Just enough", "Little", "A lot", "Nothing"] },
    { text: "Why do you want to join?", type: "written" },
    { text: "What can you bring to the group?", type: "written" }
];

let currentQuestion = 0;
let responses = [];

// ================= QUIZ FUNCTIONS =================
function startQuiz() {
    document.getElementById("start-screen").style.display = "none";
    const qScreen = document.getElementById("question-screen");
    qScreen.style.display = "block";
    loadQuestion(true);
}

function loadQuestion(isFirst=false) {
    const q = questions[currentQuestion];
    const qScreen = document.getElementById("question-screen");
    const qText = document.getElementById("question-text");
    const answerArea = document.getElementById("answers");

    if (!isFirst) {
        qScreen.classList.remove("slide-out-left");
        qScreen.classList.add("slide-in-right");
    }

    qText.textContent = q.text;
    answerArea.innerHTML = "";

    if (q.type === "multiple") {
        q.answers.forEach(ans => {
            const btn = document.createElement("button");
            btn.textContent = ans;
            btn.className = "answer-btn";
            btn.onclick = () => submitAnswer(ans);
            answerArea.appendChild(btn);
        });
    }

    if (q.type === "written") {
        const input = document.createElement("input");
        input.type = "text";
        input.placeholder = "Type your answer...";
        input.id = "writtenInput";
        answerArea.appendChild(input);

        const submit = document.createElement("button");
        submit.textContent = "Submit Answer";
        submit.className = "submit-written";
        submit.onclick = () => {
            const val = document.getElementById("writtenInput").value.trim();
            if (val === "") return alert("Please type something.");
            submitAnswer(val);
        };
        answerArea.appendChild(submit);
    }
}

function submitAnswer(answer) {
    responses.push({ question: questions[currentQuestion].text, answer: answer });
    const qScreen = document.getElementById("question-screen");
    qScreen.classList.remove("slide-in-right");
    qScreen.classList.add("slide-out-left");

    setTimeout(() => {
        currentQuestion++;
        if (currentQuestion >= questions.length) finishQuiz();
        else loadQuestion();
    }, 450);
}

// ================= FIREBASE IMPORTS =================
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

// ================= FIREBASE CONFIG =================
// üî¥ REPLACE THIS WITH YOUR CONFIG FROM FIREBASE CONSOLE
const firebaseConfig = {
  apiKey: "AIzaSyD4bDMS9X_HqSDa-2qVTZKNNsXVVA1A1A4",
  authDomain: "gggg-2095f.firebaseapp.com",
  projectId: "gggg-2095f",
  storageBucket: "gggg-2095f.firebasestorage.app",
  messagingSenderId: "1047765928516",
  appId: "1:1047765928516:web:6fe090e104b7bf735a8a11",
  measurementId: "G-HYZ2GQZ0GW"
};

// ================= FIREBASE INIT =================
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// ================= FINISH QUIZ =================
async function finishQuiz() {
    try {
        await addDoc(collection(db, "quizSubmissions"), {
            responses: responses,
            submittedAt: serverTimestamp(),
            approved: false
        });

        document.getElementById("question-screen").style.display = "none";
        document.getElementById("end-screen").style.display = "block";

        console.log("Quiz saved to Firestore ‚úÖ");

    } catch (error) {
        alert("Firestore error: " + error.message);
        console.error(error);
    }
}

// Make startQuiz visible globally
window.startQuiz = startQuiz;

</script>

    <script>
// 1Ô∏è‚É£ Select the h1 text
const startText = document.querySelector('#start-screen h1');

// 2Ô∏è‚É£ Split text into spans
const text = startText.textContent;
startText.textContent = ''; // clear original

text.split('').forEach((char, index) => {
    const span = document.createElement('span');
    span.textContent = char;
    span.style.display = 'inline-block';
    span.style.transformOrigin = 'bottom center';
    span.style.animation = 'growShrink 1s ease-in-out infinite';
    span.style.animationDelay = `${index * 0.1}s`; // stagger letters
    startText.appendChild(span);
});

// 3Ô∏è‚É£ Add the keyframes dynamically
const style = document.createElement('style');
style.textContent = `
@keyframes growShrink {
  0%, 100% { transform: translateY(0) scale(1); }
  50% { transform: translateY(-10px) scale(1.3); }
}
`;
document.head.appendChild(style);
</script>

  <script>
function showNotice() {
    document.getElementById("start-screen").style.display = "none";
    document.getElementById("notice-screen").style.display = "block";
}

function confirmStart() {
    document.getElementById("notice-screen").style.display = "none";
    startQuiz(); // calls your existing quiz logic
}
</script>



</body>
</html>
